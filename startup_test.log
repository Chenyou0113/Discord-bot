2025-06-28 23:06:18,541 - INFO - bot - 成功初始化 Gemini API
2025-06-28 23:06:18,545 - ERROR - bot - 機器人啟動失敗: asyncio.run() cannot be called from a running event loop
2025-06-29 11:23:18,421 - INFO - bot - 成功初始化 Gemini API
2025-06-29 11:23:18,424 - INFO - discord.client - logging in using static token
2025-06-29 11:23:19,345 - INFO - bot - 成功初始化 aiohttp 連接器
2025-06-29 11:23:19,346 - INFO - bot - 🔥 執行終極指令重複註冊修復...
2025-06-29 11:23:19,346 - INFO - bot - 階段1: 核子級別清理...
2025-06-29 11:23:19,346 - INFO - bot -   1.1 清除命令樹指令...
2025-06-29 11:23:19,346 - INFO - bot -   1.3 多輪徹底卸載...
2025-06-29 11:23:19,347 - INFO - bot -     第1輪: 所有擴展已清除
2025-06-29 11:23:19,347 - INFO - bot -   1.4 清除 Python 模組快取...
2025-06-29 11:23:19,347 - INFO - bot -   1.5 強制垃圾回收...
2025-06-29 11:23:19,403 - INFO - bot -     第1次垃圾回收: 清理 33 個對象
2025-06-29 11:23:19,458 - INFO - bot -     第2次垃圾回收: 清理 0 個對象
2025-06-29 11:23:19,515 - INFO - bot -     第3次垃圾回收: 清理 0 個對象
2025-06-29 11:23:21,519 - INFO - bot - 階段2: 驗證清理結果...
2025-06-29 11:23:21,520 - INFO - bot -   清理後狀態: Cogs=0, Extensions=0, Modules=0
2025-06-29 11:23:21,520 - INFO - bot - 階段3: 智慧型載入...
2025-06-29 11:23:21,521 - INFO - bot -   載入 cogs.admin_commands_fixed (1/12)...
2025-06-29 11:23:21,552 - INFO - bot -     ✅ 成功載入 cogs.admin_commands_fixed
2025-06-29 11:23:21,969 - INFO - bot -   載入 cogs.basic_commands (2/12)...
2025-06-29 11:23:21,971 - INFO - bot -     ✅ 成功載入 cogs.basic_commands
2025-06-29 11:23:22,386 - INFO - bot -   載入 cogs.info_commands_fixed_v4_clean (3/12)...
2025-06-29 11:23:22,445 - INFO - cogs.info_commands_fixed_v4_clean - 已初始化 aiohttp 工作階段 (使用自訂 SSL 上下文)
2025-06-29 11:23:22,445 - INFO - bot -     ✅ 成功載入 cogs.info_commands_fixed_v4_clean
2025-06-29 11:23:22,849 - INFO - bot -   載入 cogs.level_system (4/12)...
2025-06-29 11:23:22,854 - INFO - bot -     ✅ 成功載入 cogs.level_system
2025-06-29 11:23:23,254 - INFO - bot -   載入 cogs.monitor_system (5/12)...
2025-06-29 11:23:23,258 - INFO - bot -     ✅ 成功載入 cogs.monitor_system
2025-06-29 11:23:23,659 - INFO - bot -   載入 cogs.voice_system (6/12)...
2025-06-29 11:23:23,662 - INFO - bot -     ✅ 成功載入 cogs.voice_system
2025-06-29 11:23:24,078 - INFO - bot -   載入 cogs.chat_commands (7/12)...
2025-06-29 11:23:24,084 - INFO - cogs.chat_commands - 成功初始化聊天系統，使用模型: gemini-2.0-flash-exp
2025-06-29 11:23:24,085 - INFO - bot -     ✅ 成功載入 cogs.chat_commands
2025-06-29 11:23:24,500 - INFO - bot -   載入 cogs.search_commands (8/12)...
2025-06-29 11:23:24,504 - INFO - bot -     ✅ 成功載入 cogs.search_commands
2025-06-29 11:23:24,506 - INFO - cogs.search_commands - Search commands aiohttp session initialized
2025-06-29 11:23:24,919 - INFO - bot -   載入 cogs.weather_commands (9/12)...
2025-06-29 11:23:24,922 - INFO - cogs.weather_commands - WeatherCommands cog 已載入
2025-06-29 11:23:24,922 - INFO - bot -     ✅ 成功載入 cogs.weather_commands
2025-06-29 11:23:25,337 - INFO - bot -   載入 cogs.air_quality_commands (10/12)...
2025-06-29 11:23:25,378 - INFO - bot -     ✅ 成功載入 cogs.air_quality_commands
2025-06-29 11:23:25,789 - INFO - bot -   載入 cogs.radar_commands (11/12)...
2025-06-29 11:23:25,823 - INFO - bot -     ✅ 成功載入 cogs.radar_commands
2025-06-29 11:23:26,227 - INFO - bot -   載入 cogs.temperature_commands (12/12)...
2025-06-29 11:23:26,263 - INFO - bot -     ✅ 成功載入 cogs.temperature_commands
2025-06-29 11:23:26,678 - INFO - bot - 階段4: 載入結果驗證...
2025-06-29 11:23:26,678 - INFO - bot -   📊 載入統計: 成功 12/12
2025-06-29 11:23:26,679 - INFO - bot -   ✅ 所有擴展載入成功！
2025-06-29 11:23:26,679 - INFO - bot -   📋 已載入的 Cogs (12): AdminCommands, BasicCommands, InfoCommands, LevelSystem, MonitorSystem, VoiceSystem, ChatCommands, SearchCommands, WeatherCommands, AirQualityCommands, RadarCommands, TemperatureCommands
2025-06-29 11:23:26,679 - INFO - bot - 階段5: 終極指令同步...
2025-06-29 11:23:26,679 - INFO - bot -   同步前指令數量: 56
2025-06-29 11:23:26,679 - INFO - bot -   待同步指令: clear_startup_channel, shutdown, status, send, admin_monitor, set_startup_channel, emergency_restart, dev, get_id, restart, broadcast, hello, ping, earthquake, weather, set_earthquake_channel, tsunami, level, rank, leaderboard, set_level_channel, clear_level_channel, toggle_level_system, level_system_status, set_monitor_channel, monitor, setup_voice, clear_chat, current_model, chat, set_model, toggle_responses, api_status, set_rate_limit, reset_quota, dev_mode, add_developer, remove_developer, list_developers, dev_debug, search, search_summarize, search_settings, search_stats, auto_search, weather_station, weather_station_by_county, weather_station_info, air_quality, air_quality_county, air_quality_site, radar, radar_info, radar_large, rainfall_radar, temperature
2025-06-29 11:23:27,407 - INFO - bot -   ✅ 指令同步完成，共同步 56 個指令
2025-06-29 11:23:27,407 - INFO - bot -   📋 已同步指令: clear_startup_channel, shutdown, status, send, admin_monitor, set_startup_channel, emergency_restart, dev, get_id, restart, broadcast, hello, ping, earthquake, weather, set_earthquake_channel, tsunami, level, rank, leaderboard, set_level_channel, clear_level_channel, toggle_level_system, level_system_status, set_monitor_channel, monitor, setup_voice, clear_chat, current_model, chat, set_model, toggle_responses, api_status, set_rate_limit, reset_quota, dev_mode, add_developer, remove_developer, list_developers, dev_debug, search, search_summarize, search_settings, search_stats, auto_search, weather_station, weather_station_by_county, weather_station_info, air_quality, air_quality_county, air_quality_site, radar, radar_info, radar_large, rainfall_radar, temperature
2025-06-29 11:23:27,407 - INFO - bot - 階段6: 最終狀態報告...
2025-06-29 11:23:27,407 - INFO - bot -   🎯 最終統計:
2025-06-29 11:23:27,408 - INFO - bot -     載入的擴展: 12
2025-06-29 11:23:27,408 - INFO - bot -     活躍的 Cogs: 12
2025-06-29 11:23:27,408 - INFO - bot -     同步的指令: 56
2025-06-29 11:23:27,408 - INFO - bot - 🎉 終極修復完全成功！機器人已準備就緒！
2025-06-29 11:23:27,981 - INFO - discord.gateway - Shard ID None has connected to Gateway (Session ID: 4f2d3f4a84822cbc40be8832ec8b2a44).
2025-06-29 11:23:31,697 - INFO - cogs.info_commands_fixed_v4_clean - 開始獲取地震資料 (類型: normal)
2025-06-29 11:23:31,698 - INFO - cogs.info_commands_fixed_v4_clean - 嘗試有認證模式獲取地震資料
2025-06-29 11:23:31,698 - INFO - cogs.info_commands_fixed_v4_clean - 正在獲取地震資料，URL: https://opendata.cwa.gov.tw/api/v1/rest/datastore/E-A0015-001?Authorization=CWA-675CED45-09DF-4249-9599-B9B5A5AB761A&limit=1&format=JSON
2025-06-29 11:23:31,698 - INFO - cogs.info_commands_fixed_v4_clean - 正在發送請求到 https://opendata.cwa.gov.tw/api/v1/rest/datastore/E-A0015-001?Authorization=CWA-675CED45-09DF-4249-9599-B9B5A5AB761A&limit=1&format=JSON (嘗試 1/3)
2025-06-29 11:23:31,701 - INFO - bot - 機器人 CY test bot#8650 已成功上線！
2025-06-29 11:23:31,701 - INFO - bot - 機器人正在 8 個伺服器中運行
2025-06-29 11:23:31,702 - INFO - bot - 機器人狀態已設定為「正在玩 C. Y.」
2025-06-29 11:23:31,702 - INFO - bot -   - CY 的伺服器 (ID: 1016182933444374548, 成員數: 46)
2025-06-29 11:23:31,702 - INFO - bot -   - 銀河同樂會||聊天、交友、學習、遊戲 (ID: 1260853046678654987, 成員數: 81)
2025-06-29 11:23:31,702 - INFO - bot -   - yisheng20121224 的伺服器 (ID: 1317811361551618101, 成員數: 41)
2025-06-29 11:23:31,702 - INFO - bot -   - 阿宏 的伺服器m8y7mvse (ID: 1330961241384157204, 成員數: 2)
2025-06-29 11:23:31,703 - INFO - bot -   - ㄇㄠ頭鷹の聊天小腳漏 (ID: 1337534408906768458, 成員數: 51)
2025-06-29 11:23:31,703 - INFO - bot -   - HanEne 的伺服器 (ID: 1341720454381043735, 成員數: 3)
2025-06-29 11:23:31,703 - INFO - bot -   - Chat Yu機房 (ID: 1345360902777737327, 成員數: 39)
2025-06-29 11:23:31,703 - INFO - bot -   - Chat_secret 秘密聊天 (ID: 1370663414631764019, 成員數: 21)
2025-06-29 11:23:32,521 - INFO - cogs.info_commands_fixed_v4_clean - 成功獲取資料: {'success': 'true', 'result': {'resource_id': 'E-A0015-001', 'fields': [{'id': 'ReportType', 'type': 'String'}, {'id': 'EarthquakeNo', 'type': 'Integer'}, {'id': 'ReportContent', 'type': 'String'}, {'...
2025-06-29 11:23:32,522 - INFO - cogs.info_commands_fixed_v4_clean - 使用有認證模式資料結構 (根級別 records)
2025-06-29 11:23:32,525 - INFO - cogs.info_commands_fixed_v4_clean - ✅ 有認證模式成功獲取地震資料
2025-06-29 11:23:32,525 - INFO - cogs.info_commands_fixed_v4_clean - 成功獲取並更新地震資料快取
2025-06-29 11:27:04,865 - INFO - cogs.radar_commands - 正在從中央氣象署 API 獲取雷達圖資料: https://opendata.cwa.gov.tw/fileapi/v1/opendataapi/O-A0058-003
2025-06-29 11:27:05,397 - INFO - cogs.radar_commands - 成功獲取雷達圖資料
2025-06-29 11:27:49,425 - INFO - cogs.radar_commands - 正在從中央氣象署 API 獲取 新北樹林 降雨雷達圖資料: https://opendata.cwa.gov.tw/fileapi/v1/opendataapi/O-A0084-001
2025-06-29 11:27:49,982 - INFO - cogs.radar_commands - 成功獲取 新北樹林 降雨雷達圖資料
2025-06-29 11:28:03,264 - INFO - cogs.radar_commands - 正在從中央氣象署 API 獲取 新北樹林 降雨雷達圖資料: https://opendata.cwa.gov.tw/fileapi/v1/opendataapi/O-A0084-001
2025-06-29 11:28:06,466 - INFO - cogs.radar_commands - 正在從中央氣象署 API 獲取 新北樹林 降雨雷達圖資料: https://opendata.cwa.gov.tw/fileapi/v1/opendataapi/O-A0084-001
2025-06-29 11:28:06,910 - INFO - cogs.radar_commands - 成功獲取 新北樹林 降雨雷達圖資料
2025-06-29 11:28:07,020 - INFO - cogs.radar_commands - 成功獲取 新北樹林 降雨雷達圖資料
2025-06-29 11:28:32,604 - INFO - cogs.info_commands_fixed_v4_clean - 開始獲取地震資料 (類型: normal)
2025-06-29 11:28:32,671 - INFO - cogs.info_commands_fixed_v4_clean - 嘗試有認證模式獲取地震資料
2025-06-29 11:28:32,693 - INFO - cogs.info_commands_fixed_v4_clean - 正在獲取地震資料，URL: https://opendata.cwa.gov.tw/api/v1/rest/datastore/E-A0015-001?Authorization=CWA-675CED45-09DF-4249-9599-B9B5A5AB761A&limit=1&format=JSON
2025-06-29 11:28:32,718 - INFO - cogs.info_commands_fixed_v4_clean - 正在發送請求到 https://opendata.cwa.gov.tw/api/v1/rest/datastore/E-A0015-001?Authorization=CWA-675CED45-09DF-4249-9599-B9B5A5AB761A&limit=1&format=JSON (嘗試 1/3)
2025-06-29 11:28:32,822 - INFO - cogs.info_commands_fixed_v4_clean - 成功獲取資料: {'success': 'true', 'result': {'resource_id': 'E-A0015-001', 'fields': [{'id': 'ReportType', 'type': 'String'}, {'id': 'EarthquakeNo', 'type': 'Integer'}, {'id': 'ReportContent', 'type': 'String'}, {'...
2025-06-29 11:28:32,846 - INFO - cogs.info_commands_fixed_v4_clean - 使用有認證模式資料結構 (根級別 records)
2025-06-29 11:28:32,853 - INFO - cogs.info_commands_fixed_v4_clean - ✅ 有認證模式成功獲取地震資料
2025-06-29 11:28:32,865 - INFO - cogs.info_commands_fixed_v4_clean - 成功獲取並更新地震資料快取
