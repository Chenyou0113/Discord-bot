# Discord Bot 自動搜尋功能使用指南

## 📋 功能簡介

Discord Bot 現在支援**自動搜尋功能**！當用戶在對話中提到搜尋相關的關鍵字時，Bot 會自動檢測並執行搜尋，無需手動輸入斜線指令。

## 🚀 功能特色

### ✨ 智能檢測
- 🔍 自動檢測訊息中的搜尋關鍵字
- 🎯 智能提取搜尋查詢內容
- 🤖 無需手動輸入指令

### 🛡️ 安全機制
- ⏰ 尊重冷卻時間限制（10秒）
- 📈 遵守每日搜尋限制（50次）
- 👑 管理員可自由配置

### 💬 用戶友好
- 😊 使用表情符號反應，減少對話干擾
- 💭 顯示輸入指示器（typing...）
- 📌 回覆原訊息，保持對話連貫性

## 🔧 管理員設定

### 啟用自動搜尋功能
```
/auto_search enable:True
```

### 停用自動搜尋功能
```
/auto_search enable:False
```

### 自定義觸發關鍵字
```
/auto_search keywords:搜尋,搜索,查找,找一下
```

### 查看目前設定
```
/auto_search
```

## 📝 使用方法

### 觸發關鍵字
預設的觸發關鍵字包括：
- `搜尋`
- `搜索` 
- `查找`

### 使用範例

#### ✅ 有效的自動搜尋訊息：
```
搜尋 Python 教學
我想搜索 Discord Bot 開發
幫我查找 機器學習 資料
```

#### ❌ 無效的訊息（不會觸發）：
```
今天天氣真好
我要去吃飯了
Python很有趣
```

### 🔄 Bot 回應流程

1. **檢測階段** 🔍
   - Bot 添加 🔍 表情符號表示檢測到搜尋請求
   - 顯示 "typing..." 指示器

2. **搜尋階段** ⚡
   - 自動執行 Google 搜尋
   - 檢查用戶權限和限制

3. **結果階段** 📊
   - ✅ 成功：移除 🔍，添加 ✅，回覆搜尋結果
   - ❌ 失敗：移除 🔍，添加 ❌
   - ⏰ 冷卻中：添加 ⏰ 表情符號
   - 📈 達到限制：添加 📈 表情符號
   - ❓ 查詢無效：添加 ❓ 表情符號

## 🎯 限制與約束

### 權限限制
- 只有**管理員**或擁有**管理伺服器權限**的用戶可以配置自動搜尋
- 普通用戶只能使用功能，無法修改設定

### 使用限制
- **冷卻時間**：每次搜尋間隔 10 秒
- **每日限制**：每用戶每天最多 50 次搜尋
- **查詢長度**：自動截斷過長的查詢（100字符）

### 伺服器限制
- 每個 Discord 伺服器可以獨立配置
- 需要在每個伺服器分別啟用功能

## 🔧 進階配置

### 查看搜尋統計
```
/search_stats
```

### 調整系統設定（管理員限定）
```
/search_settings max_daily:100 cooldown:5
```

### 查看所有搜尋指令
```
/search - 基本搜尋指令
/search_summarize - AI 總結搜尋
/search_settings - 管理員設定
/search_stats - 搜尋統計
/auto_search - 自動搜尋設定
```

## 🛠️ 故障排除

### 自動搜尋不工作？
1. ✅ 確認管理員已啟用自動搜尋：`/auto_search enable:True`
2. ✅ 檢查訊息是否包含觸發關鍵字
3. ✅ 確認未達到冷卻時間或每日限制
4. ✅ 檢查 Bot 是否有足夠的權限

### 搜尋結果不理想？
1. 🎯 使用更具體的搜尋關鍵字
2. 🎯 避免過於簡短或模糊的查詢
3. 🎯 可以使用傳統的 `/search` 指令進行更精確的搜尋

### 權限問題？
1. 👑 確保 Bot 有必要的權限：
   - 讀取訊息
   - 發送訊息
   - 添加反應
   - 使用斜線指令

## 📊 技術詳情

### 自動搜尋流程
1. **訊息監聽** - `on_message` 事件監聽器
2. **關鍵字檢測** - 檢查預設觸發詞
3. **權限驗證** - 檢查冷卻和限制
4. **查詢提取** - 智能提取搜尋內容
5. **執行搜尋** - 調用 Google Custom Search API
6. **結果回覆** - 格式化並回覆結果

### 使用的 API
- **Google Custom Search API** - 網路搜尋
- **Google Gemini AI** - （可選）AI 總結功能

## 🎉 最佳實踐

### 用戶建議
- 📝 使用清晰、具體的搜尋詞彙
- 🎯 避免過於頻繁的搜尋請求
- 💡 善用表情符號反應來理解 Bot 狀態

### 管理員建議
- ⚙️ 根據伺服器活躍度調整每日限制
- 🔧 定期檢查搜尋統計，優化設定
- 📋 向用戶說明如何使用自動搜尋功能

## 📞 支援

如果您在使用過程中遇到問題，請：
1. 檢查此指南的故障排除部分
2. 使用 `/search_stats` 查看詳細狀態
3. 聯繫 Bot 管理員或開發者

---

**🎊 享受您的自動搜尋體驗！**
