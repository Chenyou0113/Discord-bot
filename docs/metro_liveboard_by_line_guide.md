# 捷運電子看板按路線分類功能使用指南

## 🚇 功能概述

新的捷運電子看板功能已升級為**按路線分類顯示**，讓您能更清楚地瀏覽不同路線的車站資訊！

## ✨ 新功能特色

### 📋 按路線分類顯示
- **自動分組**: 車站資料會自動按照路線分組顯示
- **路線色彩**: 每條路線使用不同的顏色主題
- **清晰排版**: 同一路線的車站會集中在同一個區塊顯示

### 🎛️ 互動式操作面板
- **◀️ 上一路線**: 切換到上一條路線
- **下一路線 ▶️**: 切換到下一條路線
- **📋 全路線總覽**: 查看所有路線的概況
- **🔄 刷新**: 重新載入最新的即時資料

## 🚈 支援的捷運系統

### 台北捷運 (TRTC)
- 🤎 **文湖線 (BR)**: 動物園 ↔ 內湖
- ❤️ **淡水信義線 (R)**: 淡水 ↔ 象山
- 💚 **松山新店線 (G)**: 松山 ↔ 新店
- 🧡 **中和新蘆線 (O)**: 南勢角/迴龍 ↔ 蘆洲
- 💙 **板南線 (BL)**: 頂埔 ↔ 南港展覽館
- 💛 **環狀線 (Y)**: 環狀營運
- 💚 **安坑線 (LG)**: 十四張 ↔ 安坑
- 💜 **淡海輕軌 (V)**: 淡海新市鎮

### 高雄捷運 (KRTC)
- ❤️ **紅線 (RO)**: 小港 ↔ 南岡山
- 🧡 **橘線 (OR)**: 西子灣 ↔ 大寮

### 高雄輕軌 (KLRT)
- 💚 **環狀輕軌 (C)**: 環狀營運

## 📱 使用方法

### 基本操作
1. 使用指令 `/metro_liveboard` 選擇捷運系統
2. 機器人會顯示第一條路線的車站資訊
3. 使用按鈕切換不同路線或查看總覽

### 資訊解讀
每個車站會顯示：
- 🚉 **車站名稱**: 中文站名
- 🎯 **目的地**: 列車的終點站
- ⏱️ **到站時間**: 預估到站時間
- 🔵 **服務狀態**: 
  - 🟢 正常營運
  - 🟡 列車進站中
  - 🟠 列車離站
  - ⚪ 其他狀態

## 🌟 顯示範例

```
🚇 文湖線
🚉 中山國中: 往南港展覽館 (3分鐘) | 往動物園 (5分鐘)
🚉 松山機場: 往南港展覽館 (1分鐘) | 往動物園 (7分鐘)
🚉 大直: 往南港展覽館 (4分鐘) | 往動物園 (3分鐘)

📈 路線總覽
文湖線: 24站 | 淡水信義線: 28站 | 松山新店線: 20站
```

## ⚙️ 技術改進

### 🔄 智慧分組算法
- 自動識別路線 ID 並進行分組
- 支援複雜的路線結構 (如環狀線、支線)
- 動態調整顯示順序

### 🎨 視覺優化
- 路線專屬配色方案
- 清晰的資訊層次結構
- 適應性的內容長度控制

### ⚡ 性能提升
- 分頁載入減少資源消耗
- 快取機制提升響應速度
- 錯誤處理更加穩健

## 🔧 故障排除

### 常見問題
**Q: 為什麼某些路線沒有顯示？**
A: 可能是該路線目前沒有即時資料，或是在非營運時間。

**Q: 到站時間不準確怎麼辦？**
A: 點擊 🔄 刷新按鈕獲取最新資料，或稍後再試。

**Q: 按鈕無法點擊？**
A: 只有發起指令的使用者可以操作按鈕，或者視圖可能已超時。

### 技術支援
如遇到其他問題，請查看機器人日誌或聯繫開發團隊。

## 📝 更新日誌

### v2.0.0 (2025-09-21)
- ✅ 新增按路線分類顯示功能
- ✅ 重新設計互動式操作面板
- ✅ 支援路線專屬配色
- ✅ 改善資料顯示格式
- ✅ 優化性能和錯誤處理

---

*資料來源: 交通部 TDX 平台 | 即時更新*
