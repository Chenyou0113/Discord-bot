# 氣象測站分頁功能使用指南

## 🔍 分頁功能概述

當氣象測站查詢結果超過 10 筆時，系統會自動啟用分頁功能，讓使用者能夠輕鬆瀏覽大量資料。

## � 分頁顯示方式

### 列表頁面格式
```
🌤️ 氣象測站查詢結果

📍 查詢: 台北
📊 找到 15 個測站 | 📄 第 1/2 頁

1. 🏢 台北 (C0A4A0) - 台北市 | 狀態: 現存測站
2. 🌡️ 板橋 (466920) - 新北市 | 狀態: 現存測站
...
10. 📡 士林 (C0A4B0) - 台北市 | 狀態: 現存測站

� 使用 page:2 查看下一頁
🔍 點擊下方按鈕查看測站詳細資訊
```

### 分頁資訊說明
- **總筆數顯示**: 找到 X 個測站
- **頁數顯示**: 第 X/Y 頁
- **翻頁提示**: 使用 page:X 參數

## � 分頁參數使用

### 1. `/weather_station` 分頁
```
/weather_station query:台北         # 第1頁
/weather_station query:台北 page:2  # 第2頁
/weather_station query:台北 page:3  # 第3頁
```

### 2. `/weather_station_by_county` 分頁
```
/weather_station_by_county county:新北市                    # 第1頁
/weather_station_by_county county:新北市 page:2             # 第2頁
/weather_station_by_county county:新北市 status:現存測站 page:3  # 第3頁
```

## � 分頁邏輯

### 每頁顯示數量
- **預設**: 每頁顯示 10 筆資料
- **最後一頁**: 可能少於 10 筆

### 頁數計算
```
總頁數 = ⌈總筆數 ÷ 10⌉

範例:
- 25 筆資料 = 3 頁 (10 + 10 + 5)
- 30 筆資料 = 3 頁 (10 + 10 + 10)
- 8 筆資料 = 1 頁 (8)
```

## 🎯 使用技巧

### 1. 快速瀏覽策略
```
# 先查看第1頁了解結果總數
/weather_station query:學校

# 根據總頁數決定是否需要翻頁
/weather_station query:學校 page:2
/weather_station query:學校 page:3
```

### 2. 精確搜尋減少分頁
```
# 寬泛搜尋 - 可能有很多頁
/weather_station query:台北

# 精確搜尋 - 減少結果數量
/weather_station query:台北車站
/weather_station query:C0A940
```

### 3. 縣市篩選分頁
```
# 全部測站 - 可能有多頁
/weather_station_by_county county:花蓮縣

# 狀態篩選 - 減少頁數
/weather_station_by_county county:花蓮縣 status:現存測站
```

## ⚠️ 分頁限制與注意事項

### 頁數限制
- **最大頁數**: 依實際資料筆數而定
- **無效頁數**: 超出範圍會顯示錯誤訊息
- **最小頁數**: 1（預設）

### 錯誤處理
```
# 頁數太大
/weather_station query:台北 page:999
❌ 頁數超出範圍！總共只有 3 頁

# 頁數為 0 或負數
/weather_station query:台北 page:0
❌ 頁數必須大於 0
```

### 分頁狀態說明
```
# 沒有結果
🔍 查詢: 不存在的測站
📊 找到 0 個測站

# 單頁結果
🔍 查詢: C0A940
📊 找到 1 個測站

# 多頁結果
🔍 查詢: 學校
📊 找到 45 個測站 | 📄 第 1/5 頁
```

## 📱 互動按鈕功能

### 詳細資訊按鈕
每個測站項目都提供「查看詳細資訊」按鈕：
- 點擊後顯示完整測站資訊
- 包含精確座標、海拔高度
- 提供 Google Maps 連結

### 按鈕使用範例
```
1. 🏢 台北 (C0A4A0) - 台北市 | 狀態: 現存測站
   [查看詳細資訊]  ← 點擊查看完整資料
```

## 🔄 分頁優化建議

### 對使用者的建議
1. **使用精確關鍵字**: 減少不必要的分頁
2. **利用縣市篩選**: 縮小搜尋範圍
3. **善用狀態篩選**: 過濾特定類型測站
4. **記住測站編號**: 直接查詢特定測站

### 常用搜尋模式
```
# 地區探索模式
/weather_station_by_county county:台東縣
/weather_station_by_county county:台東縣 page:2

# 關鍵字搜尋模式
/weather_station query:國小
/weather_station query:國小 page:2

# 精確查詢模式
/weather_station_info station_id:C0A940
```

## 📈 分頁效能說明

### 快取機制
- **第一次查詢**: 從 API 獲取資料，較慢（2-3秒）
- **後續分頁**: 使用快取資料，快速（<1秒）
- **快取有效期**: 1小時

### 最佳化建議
- 同一查詢的不同頁面會共用快取
- 建議在快取有效期內完成分頁瀏覽
- 快取過期後重新查詢會更新資料

---

**💡 分頁功能讓您能夠有效瀏覽大量氣象測站資料，搭配精確搜尋可獲得最佳使用體驗！**

**更新時間**: 2025年1月5日  
**版本**: v2.0  
**狀態**: ✅ 已更新並完成
